@if (kontentProduct.value(); as product) {
@if (product === 'n/a') {
<div class="product-unavailable">
    <div class="product-unavailable-icon">ℹ️</div>
    <h3 class="product-unavailable-title">Product Unavailable</h3>
    <p class="product-unavailable-description">
        Product information for this product is currently not available.
    </p>
</div>
} @else {
<div class="product-container">

    @if (product.categories; as categories) {
    <nav class="product-breadcrumbs" aria-label="Breadcrumb">
        <a [routerLink]="'/'" class="breadcrumb-item breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">/</span>
        @for (category of categories; track $index; let isLast = $last) {
        <span class="breadcrumb-item">{{category}}</span>
        @if (!isLast) {
        <span class="breadcrumb-separator">/</span>
        }
        }
    </nav>
    }
    <div [libFlexRow]="true" [libFlexRowAlign]="'start'" [libFlexRowGap]="'24px'">
        <div libFlexColumn [libFlexSize]="'300px'">
            @if (product.image; as image) {
            <img [ngSrc]="image.url" [width]="image.width" [height]="image.height" priority alt="">
            }
        </div>
        <div libFlexColumn libFlexFill>
            <h1>{{product.title}}</h1>
            <div class="product-description" [innerHTML]="product.descriptionHtml"></div>
            <div class="product-price-container">
                @if (commerceToolsProduct.value(); as skuInfo) {
                @if (skuInfo.description) {
                <div class="product-description-section">
                    <div>{{skuInfo.description}}</div>
                </div>
                }
                <div class="price-section">
                    <div class="price-label">Price</div>
                    <div class="price-value">{{skuInfo.price}}</div>
                </div>
                <div class="stock-section">
                    <div class="stock-badge" [class.in-stock]="skuInfo.inStockCount > 0"
                        [class.low-stock]="skuInfo.inStockCount <= 10 && skuInfo.inStockCount > 0"
                        [class.out-of-stock]="skuInfo.inStockCount === 0">
                        <span class="stock-indicator"></span>
                        <span class="stock-text">
                            @if (skuInfo.inStockCount > 10) {
                            In Stock
                            } @else if (skuInfo.inStockCount > 0) {
                            Low Stock ({{skuInfo.inStockCount}} remaining)
                            } @else {
                            Out of Stock
                            }
                        </span>
                    </div>
                </div>
                }
            </div>
        </div>
    </div>


</div>
}
}